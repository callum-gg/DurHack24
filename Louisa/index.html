<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7/framework7-bundle.min.css">
    <title>Personalise Profile</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <script src="hangman.js" defer></script>
</head>
<body>
    <div id="app">
        <div class="view view-main">
            <!-- Personalization Page -->
            <div class="page page-personalisation" id="personalisationPage">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="title"><h2>CREDITWISE</h2></div>
                        <div class="right">
                            <img src="img/credit-card-logo.png" alt="Logo" class="navbar-logo">
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block">
                        <h2>Choose Your Character:</h2>
                        <div class="avatar-selection">
                            <div class="avatar-option" onclick="selectAvatar(1)">
                                <img src="img/Mii1.jpg" alt="Avatar 1" id="avatar1">
                            </div>
                            <div class="avatar-option" onclick="selectAvatar(2)">
                                <img src="img/Mii2.jpg" alt="Avatar 2" id="avatar2">
                            </div>
                            <div class="avatar-option" onclick="selectAvatar(3)">
                                <img src="img/Mii3.jpg" alt="Avatar 3" id="avatar3">
                            </div>
                            <div class="avatar-option" onclick="selectAvatar(4)">
                                <img src="img/Mii4.jpg" alt="Avatar 4" id="avatar4">
                            </div>
                            <div class="avatar-option" onclick="selectAvatar(5)">
                                <img src="img/Mii5.jpg" alt="Avatar 5" id="avatar5">
                            </div>
                            <div class="avatar-option" onclick="selectAvatar(6)">
                                <img src="img/Mii6.jpg" alt="Avatar 6" id="avatar6">
                            </div>
                        </div>
                    </div>
                    <div class="block">
                        <h2>Enter your name:</h2>
                        <div class="name-input-section">
                            <input type="text" style="color:#ADD8E6" placeholder="Your name" id="nameInput">
                        </div>
                        <button class="button button-fill-ios" onclick="saveProfile()">Save</button>
                    </div>
                </div>
            </div>

            <!-- Stage1 Page -->
            <div class="page" id="stage1Page" style="display: none;">
                <div class="navbar">
                    <div class="navbar-inner">
                        <!-- Left side: avatar image and name -->
                        <div class="left" id="avatarInfo">
                            <img id="selectedAvatarImg" class="navbar-avatar" src="" alt="Avatar">
                            <span id="userName"></span>
                        </div>


                        <!-- Right side: credit card image and credit info-->
                        <div class="right">
                            <div id="balanceCreditInfo">
                                <p>Balance: <span id="balanceAmount"></span></p>
                                <p>Credit Score: <span id="creditScore"></span></p>
                            </div>
                            <img src="img/credit-card-logo.png" alt="Logo" class="navbar-logo">
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div id="welcome-box" class="welcome-box" style="display: block;">
                        <div class="welcome-box-content">
                        <div id="welcomeMessage">
                            <h2>Welcome, <span id="userNameMessage"></span>!</h2>
                            <p>Congratulations! You have just opened up a new credit card.</p>
                            <img src="img/credit-card-logo.png" alt="Credit Card Image" id="credit-card-image">
                            <p>Before we get into the fun stuff, here’s a few definitions of important key terms for the basics of credit cards!</p>
                        
                        <button class="button button-fill-ios" onclick="displayMoreContentStage1()">Next</button>
                        </div>
                        
                        </div>
                    </div>

                    <div id="stage1questions" class = "stage1questions" style="display:none; padding-top: 15px;">
                        <p> This is where callum's stuff will go </p>
                         <!-- This will be where the content of the game goes-->
                     <button class="button button-fill-ios" onclick= "showStage2Page()">Next Level</button>
                
                    </div>
                    
                
                    <script>
                        function displayMoreContentStage1() {
                           // Check if #welcomeMessage exists
                           const welcomeMessageDiv = document.querySelector('#welcomeMessage');
                           if (!welcomeMessageDiv) {
                               console.error('welcomeMessage div not found');
                               return;
                       }

                       // Update content within #welcomeMessage
                       welcomeMessageDiv.innerHTML = `
                           <h2>Understanding Your Credit Card</h2>
                           <p><strong>Balance:</strong> The amount of money you owe on your credit card.</p>
                           <p><strong>Credit Score:</strong> A numerical value that indicates your creditworthiness based on credit history.</p>
                           <p><strong>Interest Rate:</strong> The percentage of interest charged if you carry a balance from month to month.</p>
                           <button class="button button-fill-ios" onclick="displayInstructionsStage1()">Next</button>
                       `;
                   }
                   
                       function displayInstructionsStage1(){
                           // Check if #welcomeMessage exists
                           const welcomeMessageDiv = document.querySelector('#welcomeMessage');
                           if (!welcomeMessageDiv) {
                               console.error('welcomeMessage div not found');
                               return;
                       }

                       // Update content within #welcomeMessage
                       welcomeMessageDiv.innerHTML = `
                           <h2>The rules </h2>
                           <p> Starting with a credit balance of $0 and a credit score of 0, you now have the opportunity to manage your finances and build your credit history. As you navigate through various decisions, consider how each choice impacts your credit score and overall financial health. Remember, every decision you make could unlock new perks or present challenges along the way. Let’s see how you handle your newfound financial responsibility!</p>
                           <p> If you ever have any questions, please use the button on the bottom right corner to ask our chat-bot any questions. Good luck!</p>
                           <button class="button button-fill-ios" onclick="startStage1()">Start </button>
                       `;
                   }

                        function startStage1(){
                            document.getElementById('welcome-box').style.display = 'none';
                            document.getElementById('stage1questions').style.display = 'block';

                        }

    
                   </script>

                
                
                </div>
                <div class="bottom-left-button">
                    <button onclick="HelpButtonFunction()"></button>
                </div>
                
                <div class="bottom-right-button">
                    <button onclick="ChatBotFunction()"></button>
                </div>
            </div>

           <!-- Stage2 Page---------------------------------------------- -->
            <div class="page" id="stage2Page" style="display: none;">
                <div class="navbar">
                    <div class="navbar-inner">
                        <!-- Left side: avatar image and name -->
                        <div class="left" id="avatarInfoStage2">
                            <img id="selectedAvatarImgStage2" class="navbar-avatar" src="" alt="Avatar">
                            <span id="userNameStage2" class></span>
                        </div>

                        <!-- Right side: credit card image and credit info -->
                        <div class="right">
                            <div id="balanceCreditInfoStage2">
                                <p>Balance: <span id="balanceAmountStage2"></span></p>
                                <p>Credit Score: <span id="creditScoreStage2"></span></p>
                            </div>
                            <img src="img/credit-card-logo.png" alt="Logo" class="navbar-logo">
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div id="welcome-box2" class="welcome-box" style="display: block;">
                        <div class="welcome-box-content">
                        <div id="welcomeMessage">
                            <p> Well done on using a credit card for the first time! You’ve taken your first steps into the world of credit, and now you’re learning how to manage it in your everyday life. </p>
                            <p>As you continue your journey, you’ll face various scenarios that test your decision-making skills and financial awareness. Each choice will impact your credit score, balance, and future opportunities, so think carefully about how you want to navigate your financial landscape. Let’s see how well you can balance responsibilities with rewards in your daily life!</p>
                        <button class="button button-fill-ios" onclick="startStage2()">Next</button>
                        </div>
                        
                        </div>
                    </div>

                    <div id="stage2questions" class = "stage2questions" style="display:none; padding-top: 15px;">
                        <p> This is where callum's stuff will go </p>
                    <!-- This will be where the content of the game goes-->
                    <button class="button button-fill-ios" onclick= "showStage3Page()">Next Level</button>
                    </div>
                    
                
                    <script>
                        function startStage2(){
                            document.getElementById('welcome-box2').style.display = 'none';
                            document.getElementById('stage2questions').style.display = 'block';

                        }
  
                   </script>

                </div>
                <div class="bottom-left-button">
                    <button onclick="HelpButtonFunction()"></button>
                </div>
                
                <div class="bottom-right-button">
                    <button onclick="ChatBotFunction()"></button>
                </div>
                
                
            </div>

            <!-- Stage3 Page---------------------------------------------- -->
            <div class="page" id="stage3Page" style="display: none;">
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- Left side: avatar image and name -->
                    <div class="left" id="avatarInfoStage3">
                        <img id="selectedAvatarImgStage3" class="navbar-avatar" src="" alt="Avatar">
                        <span id="userNameStage3" class></span>
                    </div>

                    <!-- Right side: credit card image and credit info -->
                    <div class="right">
                        <div id="balanceCreditInfoStage3">
                            <p>Balance: <span id="balanceAmountStage3"></span></p>
                            <p>Credit Score: <span id="creditScoreStage3"></span></p>
                        </div>
                        <img src="img/credit-card-logo.png" alt="Logo" class="navbar-logo">
                    </div>
                </div>
            </div>
            <div class="page-content">
                <div id="welcome-box3" class="welcome-box" style="display: block;">
                    <div class="welcome-box-content">
                        <div id="welcomeMessage3">
                        <p>You’ve demonstrated impressive financial responsibility and achieved a high credit score, unlocking this next exciting phase of your journey—mortgaging your dream home. Before we begin, here are some definitions of important key terms to know when dealing with mortgages!</p>
                        <img src="img/house.png" alt="House Image" id="house-image">

                    <button class="button button-fill-ios" onclick="displayMoreContentStage3()">Next</button>
                </div>
                </div>
                    
                    </div>
                </div>

                <div id="stage3questions" class = "stage3questions" style="display:none; padding-top: 15px;">
                    <p> This is where callum's stuff will go </p>
        
            
                </div>
                
            
                <script>
                    function displayMoreContentStage3() {
                       // Check if #welcomeMessage exists
                       const welcomeMessageDiv = document.querySelector('#welcomeMessage3');
                       if (!welcomeMessageDiv) {
                           console.error('welcomeMessage div not found');
                           return;
                   }

                   // Update content within #welcomeMessage
                   welcomeMessageDiv.innerHTML = `
                       <h2>Understanding Mortgages</h2>
                       <p><strong>Mortgage:</strong> A mortgage is a loan specifically for buying a home. It allows you to borrow money from a lender to purchase a property and then repay it over many years. </p>
                       <p><strong>Down Payment:</strong> This is the initial amount you pay upfront when purchasing a home. A larger down payment reduces the amount you need to borrow and can lower your monthly payments and interest costs. Many lenders require at least a 5-20% down payment.</p>
                       <button class="button button-fill-ios" onclick="displayInstructionsStage3()">Next</button>
                   `;
               }
               
                   function displayInstructionsStage3(){
                       // Check if #welcomeMessage exists
                       const welcomeMessageDiv = document.querySelector('#welcomeMessage3');
                       if (!welcomeMessageDiv) {
                           console.error('welcomeMessage div not found');
                           return;
                   }

                   // Update content within #welcomeMessage
                   welcomeMessageDiv.innerHTML = `
                       <p> As you embark on this significant financial milestone, you’ll face critical decisions that will shape your future. Each scenario will test your understanding of mortgages and how they fit into your long-term financial strategy. Choose wisely, as these decisions will impact your monthly budget, equity, and overall financial health. Let’s dive into the world of homeownership and explore the possibilities that lie ahead! </p>

                       <button class="button button-fill-ios" onclick="startStage3()">Start </button>
                   `;
               }

                    function startStage3(){
                        document.getElementById('welcome-box3').style.display = 'none';
                        document.getElementById('stage3questions').style.display = 'block';

                    }

               </script>
               <div class="bottom-left-button">
                <button onclick="HelpButtonFunction()"></button>
            </div>
            
            <div class="bottom-right-button">
                <button onclick="ChatBotFunction()"></button>
            </div>
         </div>

         <div id="helpPage" style="display: none;" class="page-content">
            <div class="block-title" style="padding-bottom:10px"><h2> Resources</h2></div>
            

            <div class="list accordion-list">
                <!-- Card 1 -->
                <div class="accordion-item">
                    <div class="item-content accordion-item-toggle">
                        <div class="item-inner">
                            <div class="item-title">What to do if you’re in debt?</div>
                        </div>
                    </div>
                    <div class="accordion-item-content">
                        <div class="block">
                            <p>Managing debt can be overwhelming, but there are steps you can take to regain control...</p>
                            <p><a href="#">MoneyHelper’s Debt Management</a></p>
                        </div>
                    </div>
                </div>
                
                <!-- Card 2 -->
                <div class="accordion-item">
                    <div class="item-content accordion-item-toggle">
                        <div class="item-inner">
                            <div class="item-title">How to borrow money?</div>
                        </div>
                    </div>
                    <div class="accordion-item-content">
                        <div class="block">
                            <p>Before borrowing, it’s essential to understand the different types of loans available...</p>
                            <p><a href="#">MoneyHelper’s guide on borrowing money</a></p>
                        </div>
                    </div>
                </div>
                
                <!-- Card 3 -->
                <div class="accordion-item">
                    <div class="item-content accordion-item-toggle">
                        <div class="item-inner">
                            <div class="item-title">What online tools can help me manage my budget and expenses?</div>
                        </div>
                    </div>
                    <div class="accordion-item-content">
                        <div class="block">
                            <p>A budget planner is an invaluable tool for keeping track of your income and expenses...</p>
                            <p><a href="#">MoneyHelper’s Budget Planner</a></p>
                        </div>
                    </div>
                </div>
        
                <!-- Card 4 -->
                <div class="accordion-item">
                    <div class="item-content accordion-item-toggle">
                        <div class="item-inner">
                            <div class="item-title">What do I need to know about understanding pensions?</div>
                        </div>
                    </div>
                    <div class="accordion-item-content">
                        <div class="block">
                            <p>Pensions are a critical part of planning for your future, and understanding how they work is essential...</p>
                            <p><a href="#">MoneyHelper’s Pensions Guide</a></p>
                        </div>
                    </div>
                </div>
        
                <!-- Card 5 -->
                <div class="accordion-item">
                    <div class="item-content accordion-item-toggle">
                        <div class="item-inner">
                            <div class="item-title">What should I know about applying for a mortgage?</div>
                        </div>
                    </div>
                    <div class="accordion-item-content">
                        <div class="block">
                            <p>Applying for a mortgage is a significant financial commitment...</p>
                            <p><a href="#">MoneyHelper’s Mortgage Guide</a></p>
                        </div>
                    </div>
                </div>
            </div>
        
            <button class="button button-fill-ios" onclick="closeHelpPage()">Close Help</button>
        </div>
        <script>
            function HelpButtonFunction() {
            document.getElementById('helpPage').style.display = 'block';
        }

        function closeHelpPage() {
            document.getElementById('helpPage').style.display = 'none';
}
        </script>
         
        </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/framework7/framework7-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var app = new Framework7({
                root: '#app',
            });

            let selectedAvatar = null;

            function selectAvatar(avatarNumber) {
                selectedAvatar = avatarNumber;
                document.querySelectorAll('.avatar-option img').forEach(img => {
                    img.classList.remove('selected');
                });
                document.getElementById('avatar' + avatarNumber).classList.add('selected');
            }

            function saveProfile() {
                const name = document.getElementById('nameInput').value;
                if (name && selectedAvatar) {
                    localStorage.setItem('profileName', name);
                    localStorage.setItem('profileAvatar', selectedAvatar);

                    // Initialize balance and credit score if they don’t already exist
                    if (!localStorage.getItem('balance')) {
                        localStorage.setItem('balance', '0');
                    }
                    if (!localStorage.getItem('creditScore')) {
                        localStorage.setItem('creditScore', '0');
                    }

                    showStage1Page(); // Show stage1 page after saving
                } else {
                    app.dialog.alert('Please select an avatar and enter a name.');
                }
            }


            

            function showStage1Page() {
                document.getElementById('personalisationPage').style.display = 'none';
                document.getElementById('stage1Page').style.display = 'block';

                // Load profile details from localStorage
                const name = localStorage.getItem('profileName');
                const avatar = localStorage.getItem('profileAvatar');
                const balance = localStorage.getItem('balance');
                const creditScore = localStorage.getItem('creditScore');

                // Update avatar image and name
                document.getElementById('selectedAvatarImg').src = `img/Mii${avatar}.jpg`;
                document.getElementById('userName').textContent = name;

                // Update balance and credit score
                document.getElementById('balanceAmount').textContent = `£${balance}`;
                document.getElementById('creditScore').textContent = creditScore;

                // Populate the welcom e message 
                document.getElementById('userNameMessage').textContent = name;
            }


           

            function showStage2Page() {
            document.getElementById('personalisationPage').style.display = 'none';
            document.getElementById('stage1Page').style.display = 'none';
            document.getElementById('stage2Page').style.display = 'block';

            // Load profile details from localStorage
            const name = localStorage.getItem('profileName');
            const avatar = localStorage.getItem('profileAvatar');
            const balance = localStorage.getItem('balance');
            const creditScore = localStorage.getItem('creditScore');

            // Update avatar image and name for Stage 2
            document.getElementById('selectedAvatarImgStage2').src = `img/Mii${avatar}.jpg`;
            document.getElementById('userNameStage2').textContent = name;

            // Update balance and credit score for Stage 2
            document.getElementById('balanceAmountStage2').textContent = `£${balance}`;
            document.getElementById('creditScoreStage2').textContent = creditScore;
            }

            function showStage3Page() {
            document.getElementById('personalisationPage').style.display = 'none';
            document.getElementById('stage1Page').style.display = 'none';
            document.getElementById('stage2Page').style.display = 'none';
            document.getElementById('stage3Page').style.display = 'block';

            // Load profile details from localStorage
            const name = localStorage.getItem('profileName');
            const avatar = localStorage.getItem('profileAvatar');
            const balance = localStorage.getItem('balance');
            const creditScore = localStorage.getItem('creditScore');

            // Update avatar image and name for Stage 3
            document.getElementById('selectedAvatarImgStage3').src = `img/Mii${avatar}.jpg`;
            document.getElementById('userNameStage3').textContent = name;

            // Update balance and credit score for Stage 3
            document.getElementById('balanceAmountStage3').textContent = `£${balance}`;
            document.getElementById('creditScoreStage3').textContent = creditScore;
            }

        

            function showPersonalisationPage() {
                document.getElementById('personalisationPage').style.display = 'block';
                document.getElementById('stage1Page').style.display = 'none';
            }

            // Clear profile data and reset to personalisation page on refresh
            function clearProfileData() {
                localStorage.clear();
                showPersonalisationPage();
            }

            // Clear profile data on page load
            clearProfileData();

            // Attach functions to global scope
            window.selectAvatar = selectAvatar;
            window.saveProfile = saveProfile;
            window.showStage2Page = showStage2Page;
            window.showStage3Page = showStage3Page;
        })
    </script>
</body>
</html>